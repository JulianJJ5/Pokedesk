<template>
  <body>
    <img src="./../imagenes/fondo_pokemon.jpg" alt="background image" id="fondo" v-show="fondo">
  <div id="contenedor">

    <div id="buscador">
    <input id="cajaDeTexto" type="text" placeholder="Ingrese el nombre o numero del pokemon" v-model="id"/>
    <button @click="traerInformacion">Buscar</button>
</div>

<div id="cajaPrincipal">
  <div id="primeraLineaDeInformacion">
    <h1 v-show="nombreDelPokemon">{{ nombreDelPokemon }}</h1>

    <div id="cajaDelTipoDePokemon" v-show="categoriaDelPokemon">
      {{ categoriaDelPokemon }} 
</div>

<div id="cajaDelTipo2DePokemon" v-show="categoria2DelPokemon">
      {{ categoria2DelPokemon }} 
</div>
      <h2 v-show="numeroPokemon">{{ "#" + numeroPokemon }}</h2>
  </div>

    <img v-show="imgPokemon" :src="imgPokemon" alt="" />
        <div id="cajaDelTipoDePokemon" v-show="categoriaDelPokemon">
          {{ categoriaDelPokemon }} 
      </div>
</div>    
    <div id="fichaDelPokemon">
    
    <h1 v-show="pesoDelPokemon">{{ "Peso: " + pesoDelPokemon/10 + " Kg" }}</h1>
    <h1 v-show="alturaDelPokemon">{{ "Altura: " + alturaDelPokemon/10 + " m"}}</h1>
    <h1 v-show="categoria2DelPokemon">{{ "Categoría 2: " + categoria2DelPokemon }}</h1>
</div>


<div id="contenedorEstadisticas">
    <div id="estadisticas">
      
  <div class="q-pa-md flex flex-center">
    <h1>HP: </h1> 
    <q-circular-progress
      show-value
      font-size="25px"
      :value="maximoDeProgresoCircular(hpDelPokemon)"
      size="100px"
      :thickness="0.23"
      color="light-blue"
      track-color="transparent"
      class="q-ma-md"
    >
      {{ hpDelPokemon }}
    </q-circular-progress>
  </div>


    <div class="q-pa-md flex flex-center">
      <h1>Ataque: </h1>
    <q-circular-progress
      show-value
      font-size="25px"
      :value="maximoDeProgresoCircular(ataqueDelPokemon)"
      size="10px"
      :thickness="0.22"
      color="light-blue"
      track-color="transparent"
      class="q-ma-md"
    >
      {{ ataqueDelPokemon }}
    </q-circular-progress>
  </div>


    <div class="q-pa-md flex flex-center">
    <h1>Defensa: </h1>
    <q-circular-progress
      show-value
      font-size="25px"
      :value="maximoDeProgresoCircular(defensaDelPokemon)"
      size="100px"
      :thickness="0.22"
      color="light-blue"
      track-color="transparent"
      class="q-ma-md"
    >
      {{ defensaDelPokemon }}
    </q-circular-progress>
  </div>


    <div class="q-pa-md flex flex-center">
      <h1>Ataque Especial: </h1>
    <q-circular-progress
      show-value
      font-size="25px"
      :value="maximoDeProgresoCircular(ataqueEspecialDelPokemon)"
      size="100px"
      :thickness="0.22"
      color="light-blue"
      track-color="transparent"
      class="q-ma-md"
    >
      {{ ataqueEspecialDelPokemon }}
    </q-circular-progress>
  </div>


    <div class="q-pa-md flex flex-center">
      <h1>Defensa Especial: </h1>
    <q-circular-progress
      show-value
      font-size="25px"
      :value="maximoDeProgresoCircular(defensaEspecialDelPokemon)"
      size="100px"
      :thickness="0.22"
      color="light-blue"
      track-color="transparent"
      class="q-ma-md"
    >
      {{ defensaEspecialDelPokemon }}
    </q-circular-progress>
  </div>

    <div class="q-pa-md flex flex-center">
      <h1>Velocidad: </h1>
    <q-circular-progress
      show-value
      font-size="25px"
      :value="maximoDeProgresoCircular(velocidadDelPokemon)"
      size="100px"
      :thickness="0.22"
      color="light-blue"
      track-color="transparent"
      class="q-ma-md"
    >
      {{ velocidadDelPokemon }}
    </q-circular-progress>
  </div>
</div>
    </div>

  </div>
  </body>
</template>

<script setup>
import axios from "axios";
import { ref } from "vue";

let id = ref("");
let imgPokemon = ref("");
let numeroPokemon = ref("");
let nombreDelPokemon = ref("");
let pesoDelPokemon = ref("");
let alturaDelPokemon = ref("");
let categoriaDelPokemon = ref("");
let categoria2DelPokemon = ref("");
let hpDelPokemon = ref("");
let ataqueDelPokemon = ref("");
let defensaDelPokemon = ref("");
let ataqueEspecialDelPokemon = ref("");
let defensaEspecialDelPokemon = ref("");
let velocidadDelPokemon = ref("");



async function traerInformacion() {
  let url = await axios.get(`https://pokeapi.co/api/v2/pokemon/${id.value}`);
  let data = url.data;
  imgPokemon.value = url.data.sprites.other["official-artwork"].front_default;
  nombreDelPokemon.value = url.data.species.name;
  numeroPokemon.value = url.data.id;
  pesoDelPokemon.value = url.data.weight;
  alturaDelPokemon.value = url.data.height;
  categoriaDelPokemon.value = url.data.types["0"].type.name;

  if (data.types.lenght > 1) {
    categoria2DelPokemon.value = url.data.types["1"].type.name;
  }
  hpDelPokemon.value = url.data.stats["0"].base_stat;
  ataqueDelPokemon.value = url.data.stats["1"].base_stat;
  defensaDelPokemon.value = url.data.stats["2"].base_stat;
  ataqueEspecialDelPokemon.value = url.data.stats["3"].base_stat;
  defensaEspecialDelPokemon.value = url.data.stats["4"].base_stat;
  velocidadDelPokemon.value = url.data.stats["5"].base_stat;

cambiarColorDelBodySegunTipoDePokemon();
cambiarColorSegunTipoDePokemonParaElBotonDelTipo();
};

function maximoDeProgresoCircular(value) {
  return (value / 255) * 100;
};


// let colorSegunTipoDePokemonStyle = ref()
let colorSegunTipoDePokemon = {
  fire: "#FF5733", // Rojo anaranjado
  grass: "#4CAF50", // Verde
  water: "#2196F3", // Azul
  electric: "#FFC107", // Amarillo
  ground: "#795548", // Marrón
  poison: "#9C27B0", // Púrpura
  rock: "#607D8B", // Gris azulado
  bug: "#CDDC39", // Verde lima
  dragon: "#673AB7", // Púrpura profundo
  psychic: "#FF4081", // Rosa fuerte
  ghost: "#607D8B", // Gris azulado (repetido para "ghost")
  dark: "#212121", // Negro
  steel: "#9E9E9E", // Gris
  fairy: "#E91E63", // Rosa
  fighting: "#FF5252", // Rojo claro
  normal: "#FFFFFF", // Blanco
  ice: "#03A9F4", // Azul claro
  flying: "#03A9F4" // Azul claro (repetido para "flying")
};


let colorSegunTipoDePokemonParaElBotonDelTipo = {
  fire: "#F13F19",
  grass: "#1DD024",
  water: "#2482CD", 
  electric: "#FFAF00",
  ground: "#945B47",
  poison: "#820797",
  rock: "#4B88A5",
  bug: "#C5D714",
  dragon: "#5A1CC6",
  psychic: "#F32A6E",
  ghost: "#2A79A0",
  dark: "#171313",
  steel: "#93A7B1",
  fairy: "#FF007B",
  fighting: "#F93333",
  normal: "#EBEBEB",
  ice: "#038DF4",
  flying: "#0392F4"
};

let cambiarColorDelBodySegunTipoDePokemon = () => {
  let color = colorSegunTipoDePokemon[categoriaDelPokemon.value];
  document.body.style.backgroundColor = color;
};

let cambiarColorSegunTipoDePokemonParaElBotonDelTipo = () => {
  let color = colorSegunTipoDePokemonParaElBotonDelTipo[categoriaDelPokemon.value];
  cajaDelTipoDePokemon.style.backgroundColor = color;
  cajaDelTipo2DePokemon.style.backgroundColor = color;
};

</script>

<style>

#fondo{
  width: 100%;
  height: 100vh;
  position: fixed;
  top: 0px;
  right:0%;
}

#contenedor {
  align-items: center;
  position: relative;
}

#buscador {
  width: 100%;
  display: flex;
  justify-content: center;
  gap: 3%;
  margin-bottom: 20px;
}

#buscador input {
  width: 40%;
  border: 2px solid #000;
  border-radius: 20px;
  font-size: 1.3rem;
  padding: 0.8%;
  outline: none;
}

#buscador input:focus {
  border-color: #1e90ff;
}

#buscador button {
  border: 2px solid #000;
  border-radius: 20px;
  font-size: 1.3rem;
  padding: 0.8% 2%;
  cursor: pointer;
  background-color: #fff;
  transition: background-color 0.3s;
}

#buscador button:hover {
  background-color: #f0f0f0;
}

#cajaPrincipal {
  position: relative;
  right: 35%;
  top: -50px;
  z-index: 1;
}

#cajaPrincipal img {
  border-radius: 10px;

}

#cajaPrincipal h1 {
font-weight: bold;
text-transform: capitalize;
font-size: 80px;
position: relative;
top: 90px;
text-shadow: 
    -5px -1px 0 #000000,  
    1px -1px 0 #000000,
    -1px 1px 0 #000000,
    1px 1px 0 #000000;  
}

#cajaPrincipal h2 {
font-weight: bold;
text-transform: capitalize;
font-size: 50px;
position: relative;
bottom: 450px;
left: 160px;
text-shadow: 
    -4px -1px 0 #000000,  
    1px -1px 0 #000000,
    -1px 1px 0 #000000,
    1px 1px 0 #000000;  
}

#contenedorEstadisticas{
  position: relative;
  top: -830px;
  left: 40%;
  width: 62%;
}

#estadisticas {
  text-align: center;
  margin-bottom: 20px;
  display: grid;
  position: relative;
  grid-template-columns: repeat(3, 1fr);
  gap: 0px;

}

#estadisticas h1 {
  width: 38%;
  font-size: 210%;
  text-shadow: 
    -2px -1px 0 #000000,  
    1px -1px 0 #000000,
    -1px 1px 0 #000000,
    1px 1px 0 #000000;  

}

#fichaDelPokemon{
  display: flex;
  font-size: 80%;
  position: relative;
  gap: 5%;
  top: -150px;
  text-shadow: 
    -2px -1px 0 #000000,  
    1px -1px 0 #000000,
    -1px 1px 0 #000000,
    1px 1px 0 #000000; 
}

#cajaDelTipoDePokemon{
  border: 2px solid black;
  position: relative;
  font-size: 40px ;
  width: 15%;
  left: 67%;
  bottom: 662px;
  border-radius: 50px;
}

#cajaDelTipo2DePokemon{
  border: 2px solid black;
  position: relative;
  font-size: 40px ;
  width: 15%;
  left: 67%;
  bottom: 662px;
  border-radius: 50px;
}
.q-circular-progress {
  width: 100px;
  height: 100px;
  position: relative;
  text-shadow: 
    -2px -1px 0 #000000,  
    1px -1px 0 #000000,
    -1px 1px 0 #000000,
    1px 1px 0 #000000;  
}

.q-circular-progress::before,
.q-circular-progress::after {
  content: '';
  position: absolute;
  border-radius: 50%;
}

.q-circular-progress::before {
  top: 11px; 
  left: 11px; 
  right: 11px; 
  bottom: 11px; 
  box-shadow: inset 0 0 5px rgb(0, 0, 0); /* Borde interno */
}

.q-circular-progress::after {
  top: 0px; 
  left: 0px; 
  right: 0px; 
  bottom: 0px; 
  box-shadow: 0 0 5px rgb(0, 0, 0); /* Borde externo */
}

</style>
